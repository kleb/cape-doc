
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>4.2.11. Output Functional Definition &#8212; CAPE 1.0</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinxdoc.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../../_static/NASA_logo_icon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="4.2.12. Data Book Definitions" href="DataBook.html" />
    <link rel="prev" title="4.2.10. Surface Configuration and Naming" href="Config.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="DataBook.html" title="4.2.12. Data Book Definitions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Config.html" title="4.2.10. Surface Configuration and Naming"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">CAPE 1.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">4. </span>pyCart Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U"><span class="section-number">4.2. </span>Control Files for pyCart (<code class="file docutils literal notranslate"><span class="pre">pyCart.json</span></code>)</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">4.2.11. </span>Output Functional Definition</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="output-functional-definition">
<span id="json-functional"></span><h1><span class="section-number">4.2.11. </span>Output Functional Definition<a class="headerlink" href="#output-functional-definition" title="Permalink to this headline">¶</a></h1>
<p>For cases utilizing Cart3D’s adjoint capabilities, either for output-based mesh
adaptation or for evaluating derivatives and sensitivities, an output functional
must be defined.  This can be done by defining the functional in the template
<code class="file docutils literal notranslate"><span class="pre">input.cntl</span></code> file or by using the “Functional” section of
<code class="file docutils literal notranslate"><span class="pre">pyCart.json</span></code>.  The default for this section is simply <code class="docutils literal notranslate"><span class="pre">&quot;Functional&quot;:</span>
<span class="pre">{}</span></code>, so the following example shows how to define two forces that are added as
a weighted sum to define the output functional.</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;Functional&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;CN&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;optForce&quot;</span><span class="p">,</span>
        <span class="s2">&quot;force&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>
        <span class="s2">&quot;frame&quot;</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span>
        <span class="s2">&quot;weight&quot;</span><span class="o">:</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="s2">&quot;compID&quot;</span><span class="o">:</span> <span class="s2">&quot;wings&quot;</span><span class="p">,</span>
        <span class="s2">&quot;J&quot;</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span>
        <span class="s2">&quot;N&quot;</span><span class="o">:</span> <span class="mf">1</span><span class="p">,</span>
        <span class="s2">&quot;target&quot;</span><span class="o">:</span> <span class="mf">0.0</span>
    <span class="p">},</span>
    <span class="s2">&quot;CY&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;optForce&quot;</span><span class="p">,</span>
        <span class="s2">&quot;force&quot;</span><span class="o">:</span> <span class="mf">1</span><span class="p">,</span>
        <span class="s2">&quot;frame&quot;</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span>
        <span class="s2">&quot;weight&quot;</span><span class="o">:</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="s2">&quot;compID&quot;</span><span class="o">:</span> <span class="s2">&quot;entire&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>This defines the output function as
<span class="math notranslate nohighlight">\(1.0C_{N,\mathit{wings}}+0.5C_{Y,\mathit{entire}}\)</span>, i.e. the normal force
coefficient on the component called <code class="docutils literal notranslate"><span class="pre">wings</span></code> plus 0.5 times the side force
coefficient on the entire surface.  For this to work, there must be a component
in <code class="file docutils literal notranslate"><span class="pre">Config.xml</span></code> called <code class="docutils literal notranslate"><span class="pre">&quot;wings&quot;</span></code> (<code class="docutils literal notranslate"><span class="pre">&quot;entire&quot;</span></code> is defined
automatically), and both “wings” and “entire” must be requested forces in the
“Config” section of <code class="file docutils literal notranslate"><span class="pre">pyCart.json</span></code>.</p>
<p>The names of the output forces (<code class="docutils literal notranslate"><span class="pre">&quot;CN&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;CY&quot;</span></code> in the example above) can
be whatever the user chooses.  These names will be used in the processed
<code class="file docutils literal notranslate"><span class="pre">input.cntl</span></code> files used to run Cart3D, so coherent names are always
recommended.  The only actual limitation (which is a limitation if pyCart and
not Cart3D itself) is that no two forces can have the same name.  For example,
if you want to use the normal force on two components, their forces cannot both
be named <code class="docutils literal notranslate"><span class="pre">&quot;CN&quot;</span></code>.  Instead use something like <code class="docutils literal notranslate"><span class="pre">&quot;CN_L&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;CN_R&quot;</span></code>.</p>
<p>In addition, the <em>J</em>, <em>N</em>, and <em>target</em> options, which are described below, can
be omitted in most cases.  They can be used to define special nonlinear output
functions.</p>
<p>The full dictionary of “Functional” options and their possible values is shown
below.</p>
<blockquote>
<div><dl>
<dt><em>Functional</em>: {<code class="docutils literal notranslate"><span class="pre">{}</span></code>} | <code class="docutils literal notranslate"><span class="pre">{&quot;C&quot;:</span> <span class="pre">C,</span> <span class="pre">&quot;C2&quot;:</span> <span class="pre">C2}</span></code> | <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></dt><dd><p>Dictionary of output force(s)</p>
<dl>
<dt><em>C</em>: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></dt><dd><p>An individual output force description <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<dl class="simple">
<dt><em>type</em>: {<code class="docutils literal notranslate"><span class="pre">&quot;optForce&quot;</span></code>} | <code class="docutils literal notranslate"><span class="pre">&quot;optMoment&quot;</span></code> | <code class="docutils literal notranslate"><span class="pre">&quot;optSensor&quot;</span></code></dt><dd><p>Output type; if <code class="docutils literal notranslate"><span class="pre">&quot;optSensor&quot;</span></code>, the name of the key is the
name of the point/line sensor to reference</p>
</dd>
<dt><em>compID</em>: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> | <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></dt><dd><p>Name of component from which to calculate force/moment</p>
</dd>
<dt><em>force</em>: {<code class="docutils literal notranslate"><span class="pre">0</span></code>} | <code class="docutils literal notranslate"><span class="pre">1</span></code> | <code class="docutils literal notranslate"><span class="pre">2</span></code></dt><dd><p>Component of force to use, i.e. <code class="docutils literal notranslate"><span class="pre">0</span></code> for <em>x</em>-axis (<em>CA</em> or
<em>CLL</em>), <code class="docutils literal notranslate"><span class="pre">1</span></code> for <em>y</em>-axis, <code class="docutils literal notranslate"><span class="pre">2</span></code> for <em>z</em>-axis; does not apply
to <code class="docutils literal notranslate"><span class="pre">&quot;optSensor&quot;</span></code></p>
</dd>
<dt><em>frame</em>: {<code class="docutils literal notranslate"><span class="pre">0</span></code>} | <code class="docutils literal notranslate"><span class="pre">1</span></code></dt><dd><p>Force frame; <code class="docutils literal notranslate"><span class="pre">0</span></code> for body axes and <code class="docutils literal notranslate"><span class="pre">1</span></code> for stability axes;
does not apply to <code class="docutils literal notranslate"><span class="pre">&quot;optSensor&quot;</span></code></p>
</dd>
<dt><em>weight</em>: {<code class="docutils literal notranslate"><span class="pre">1.0</span></code>} | <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></dt><dd><p>Weight multiplier for force’s contribution to total</p>
</dd>
<dt><em>J</em>: {<code class="docutils literal notranslate"><span class="pre">0</span></code>} | <code class="docutils literal notranslate"><span class="pre">1</span></code></dt><dd><p>Modifier for the force; not normally used</p>
</dd>
<dt><em>N</em>: {<code class="docutils literal notranslate"><span class="pre">1</span></code>} | <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></dt><dd><p>Exponent on force coefficient</p>
</dd>
<dt><em>target</em>: {<code class="docutils literal notranslate"><span class="pre">0.0</span></code>} | <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></dt><dd><p>Target value; functional is <code class="docutils literal notranslate"><span class="pre">weight*(F-target)**N</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/NASA_logo.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="Config.html"
                        title="previous chapter"><span class="section-number">4.2.10. </span>Surface Configuration and Naming</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="DataBook.html"
                        title="next chapter"><span class="section-number">4.2.12. </span>Data Book Definitions</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/pycart/json/Functional.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="DataBook.html" title="4.2.12. Data Book Definitions"
             >next</a> |</li>
        <li class="right" >
          <a href="Config.html" title="4.2.10. Surface Configuration and Naming"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">CAPE 1.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">4. </span>pyCart Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" ><span class="section-number">4.2. </span>Control Files for pyCart (<code class="file docutils literal notranslate"><span class="pre">pyCart.json</span></code>)</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">4.2.11. </span>Output Functional Definition</a></li> 
      </ul>
    </div>

  <div class="footer">
   CAPE version 1.0a2 documentation, 2021.
  </div>


  </body>
</html>