
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3.7.1. Uncategorized JSON Options &#8212; CAPE 1.0</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinxdoc.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/NASA_logo_icon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="3.7.2. PBS Script Options" href="PBS.html" />
    <link rel="prev" title="3.7. Common JSON Settings" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="PBS.html" title="3.7.2. PBS Script Options"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="3.7. Common JSON Settings"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">CAPE 1.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">3. </span>Usage and Common Settings</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U"><span class="section-number">3.7. </span>Common JSON Settings</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.7.1. </span>Uncategorized JSON Options</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="uncategorized-json-options">
<span id="cape-json-uncategorized"></span><h1><span class="section-number">3.7.1. </span>Uncategorized JSON Options<a class="headerlink" href="#uncategorized-json-options" title="Permalink to this headline">¶</a></h1>
<p>Several inputs in the JSON control files are outside of each category.  A few of
those are common to each module, and they are described here.  The JSON syntax
for these options (shown with some non-default values) is</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;nSubmit&quot;</span><span class="o">:</span> <span class="mf">10</span><span class="p">,</span>
<span class="s2">&quot;umask&quot;</span><span class="o">:</span> <span class="mo">0027</span><span class="p">,</span>
<span class="s2">&quot;ShellCmds&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&quot;module load cape&quot;</span><span class="p">,</span>
    <span class="s2">&quot;export PATH=$PATH:~/usr/cart3d&quot;</span>
<span class="p">],</span>
<span class="s2">&quot;BatchShellCmds&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&quot;module load tecplot/360EX_2016r1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;module load texlive/2008&quot;</span>
<span class="p">],</span>
<span class="s2">&quot;PythonPath&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;tools&quot;</span><span class="p">],</span>
<span class="s2">&quot;Modules&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;mymod&quot;</span><span class="p">,</span> <span class="s2">&quot;thatmod&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>Links to additional options for each specific solver are found below.</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="../../pycart/json/uncategorized.html#pycart-json-uncategorized"><span class="std std-ref">Cart3D</span></a></p></li>
<li><p><a class="reference internal" href="../../pyfun/json/uncategorized.html#pyfun-json-uncategorized"><span class="std std-ref">FUN3D</span></a></p></li>
<li><p><a class="reference internal" href="../../pyover/json/uncategorized.html#pyover-json-uncategorized"><span class="std std-ref">OVERFLOW</span></a></p></li>
</ul>
</div></blockquote>
<div class="section" id="maximum-number-of-jobs-to-submit">
<h2><span class="section-number">3.7.1.1. </span>Maximum Number of Jobs to Submit<a class="headerlink" href="#maximum-number-of-jobs-to-submit" title="Permalink to this headline">¶</a></h2>
<p>This parameter sets the maximum number of jobs that CAPE or any of the
derivative modules will submit with a single command-line call.</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;nSubmit&quot;</span><span class="o">:</span> <span class="mf">10</span>
</pre></div>
</div>
</div></blockquote>
<p>However, this value can be overridden from the command line using the <code class="docutils literal notranslate"><span class="pre">-n</span></code>
option.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cape -n <span class="m">20</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="file-permissions-mask">
<h2><span class="section-number">3.7.1.2. </span>File Permissions Mask<a class="headerlink" href="#file-permissions-mask" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">umask</span></code> parameter is important to set on systems with shared files. There
are a variety of reasons that PBS jobs may start using a file permissions mask
different from the user’s preferred value. Typically, the most appropriate
<code class="docutils literal notranslate"><span class="pre">umask</span></code> is <code class="docutils literal notranslate"><span class="pre">0027</span></code>, which causes new files to have permissions <code class="docutils literal notranslate"><span class="pre">640</span></code> and
new directories or executable files to have permissions <code class="docutils literal notranslate"><span class="pre">750</span></code>. This enables
users within the same group to read files but not edit them. Many systems will
use the default mask <code class="docutils literal notranslate"><span class="pre">700</span></code>, which means that even users in the same group
cannot see or read the files.</p>
</div>
<div class="section" id="startup-shell-commands">
<h2><span class="section-number">3.7.1.3. </span>Startup Shell Commands<a class="headerlink" href="#startup-shell-commands" title="Permalink to this headline">¶</a></h2>
<p>An important miscellaneous option, especially for cases submitted as PBS jobs,
lists commands to run within the shell before running any Cart3D/FUN3D/whatever
commands.  This is a list of strings that will be placed at the top of the run
script in each case directory.  There is also <code class="docutils literal notranslate"><span class="pre">&quot;BatchShellCmds&quot;</span></code>, which
specifies additional commands that are run in <code class="docutils literal notranslate"><span class="pre">pycart</span> <span class="pre">--batch</span></code> commands. By
default, this is an empty list, which means no startup commands are issued at
the beginning of PBS jobs.</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;ShellCmds&quot;</span><span class="o">:</span> <span class="p">[],</span>
<span class="s2">&quot;BatchShellCmds&quot;</span><span class="o">:</span> <span class="p">[]</span>
</pre></div>
</div>
</div></blockquote>
<p>When Cape sets up a case, it creates a run script <code class="file docutils literal notranslate"><span class="pre">run_cape.pbs</span></code> in each
folder (or, if there is a nontrivial run sequence, <code class="file docutils literal notranslate"><span class="pre">run_cape.00.pbs</span></code>,
<code class="file docutils literal notranslate"><span class="pre">run_cape.01.pbs</span></code>, etc.). The run script can use BASH, <code class="docutils literal notranslate"><span class="pre">csh</span></code>, or any
other shell, and this is set in the “PBS” section of the JSON file. The default
is BASH (that is, <code class="docutils literal notranslate"><span class="pre">&quot;/bin/bash&quot;</span></code>), but some users prefer <code class="docutils literal notranslate"><span class="pre">csh</span></code>.</p>
<p>If your <code class="docutils literal notranslate"><span class="pre">rc</span></code> file for your selected shell contains the necessary commands to
run Cart3D, a possible option is to use the following.</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;ShellCmds&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;source ~/.bashrc&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>(or <code class="docutils literal notranslate"><span class="pre">&quot;.</span> <span class="pre">~/.bashrc&quot;</span></code>, as appropriate) This is discouraged unless Cart3D,
OVERFLOW, or FUN3D is basically the only software you ever use. A better option
is to put the commands that are needed in the JSON file, which makes that file
portable and less subject to later errors or system changes. Here is an example
that I use to run Cart3D on NASA’s <em>Pleiades</em> supercomputer.</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;ShellCmds&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&quot;. $MODULESHOME/init/bash&quot;</span><span class="p">,</span>
    <span class="s2">&quot;module use -a /u/ddalle/share/modulefiles&quot;</span><span class="p">,</span>
    <span class="s2">&quot;module load cart3d&quot;</span><span class="p">,</span>
    <span class="s2">&quot;module load pycart&quot;</span><span class="p">,</span>
    <span class="s2">&quot;module load mpt&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>The first command is necessary because PBS jobs are started with very few
environment variables set.  For running cases in parallel, this command (or
sourcing a premade <code class="file docutils literal notranslate"><span class="pre">.*shrc</span></code> file) is necessary.  Another thing to note
here is that you also need to tell the interpreter where the pyCart commands
are—hence the <code class="docutils literal notranslate"><span class="pre">&quot;module</span> <span class="pre">load</span> <span class="pre">pycart&quot;</span></code> line.</p>
<p>A common use for <code class="docutils literal notranslate"><span class="pre">--batch</span></code> commands is to create reports that are
time-consuming and inappropriate for a supercomputer’s login nodes.  For such
cases it is typical to add Tecplot and LaTeX modules for batch jobs.</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;BatchShellCmds&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&quot;module load tecplot/360EX_2016r1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;module load texlive/2008&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="special-python-modules">
<span id="cape-json-uncategorized-mod"></span><h2><span class="section-number">3.7.1.4. </span>Special Python Modules<a class="headerlink" href="#special-python-modules" title="Permalink to this headline">¶</a></h2>
<p>Some advanced runs require features that simply do not fit into the main
pyCart, pyOver, or whichever appropriate set of options. This would be true no
matter much work is put into the code. Indeed, one of the purposes of Cape is
to still be helpful when this situation inevitably occurs.</p>
<p>The following two lines allow the user to define a custom Python module (or
list of modules, if the user deems that appropriate).</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;PythonPath&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;tools/&quot;</span><span class="p">],</span>
<span class="s2">&quot;Modules&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;mymod&quot;</span><span class="p">,</span> <span class="s2">&quot;thatmod&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>The first variable causes pyCart to append the folder <code class="docutils literal notranslate"><span class="pre">tools/</span></code> to the
environment variable <code class="docutils literal notranslate"><span class="pre">$PYTHONPATH</span></code>.  This means that files in <code class="docutils literal notranslate"><span class="pre">tools/</span></code> can
be imported as Python modules.</p>
<p>The second variable lists Python modules that will be imported every time the
the JSON file is loaded.  The way this is implemented is by just
running the standard <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">mymod</span></code> and <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">thatmod</span></code> syntax, and then
the functions and other information in those modules will be available to
Cape for that run.</p>
</div>
<div class="section" id="miscellaneous-options-dictionary">
<span id="cape-json-misc-dict"></span><h2><span class="section-number">3.7.1.5. </span>Miscellaneous Options Dictionary<a class="headerlink" href="#miscellaneous-options-dictionary" title="Permalink to this headline">¶</a></h2>
<p>The full list of available options and their possible values is described below.
Alternate options are separated by <code class="docutils literal notranslate"><span class="pre">|</span></code> charcters, and default values are
between <code class="docutils literal notranslate"><span class="pre">{}</span></code> characters.</p>
<blockquote>
<div><dl class="simple">
<dt><em>BatchShellCmds</em>: {<code class="docutils literal notranslate"><span class="pre">[]</span></code>} | <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>)</dt><dd><p>List of shell commands to run after <em>ShellCmds</em> for batch PBS jobs</p>
</dd>
<dt><em>ShellCmds</em>: {<code class="docutils literal notranslate"><span class="pre">[]</span></code>} | <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>)</dt><dd><p>List of shell commands to run at start of each script</p>
</dd>
<dt><em>PythonPath</em>: {<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>} | <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> | <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>)</dt><dd><p>Path or list of paths to add to <code class="docutils literal notranslate"><span class="pre">$PYTHONPATH</span></code> environment variable</p>
</dd>
<dt><em>Modules</em>: {<code class="docutils literal notranslate"><span class="pre">[]</span></code>} | <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> | <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>)</dt><dd><p>Python module or list of Python modules to import with this file</p>
</dd>
<dt><em>nSubmit</em>: {<code class="docutils literal notranslate"><span class="pre">10</span></code>} | <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></dt><dd><p>Maximum number of jobs to submit/run</p>
</dd>
<dt><em>umask</em>: {<code class="docutils literal notranslate"><span class="pre">0027</span></code>} | <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code> | <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></dt><dd><p>File permissions mask interpreted as octal number</p>
</dd>
</dl>
</div></blockquote>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/NASA_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">3.7.1. Uncategorized JSON Options</a><ul>
<li><a class="reference internal" href="#maximum-number-of-jobs-to-submit">3.7.1.1. Maximum Number of Jobs to Submit</a></li>
<li><a class="reference internal" href="#file-permissions-mask">3.7.1.2. File Permissions Mask</a></li>
<li><a class="reference internal" href="#startup-shell-commands">3.7.1.3. Startup Shell Commands</a></li>
<li><a class="reference internal" href="#special-python-modules">3.7.1.4. Special Python Modules</a></li>
<li><a class="reference internal" href="#miscellaneous-options-dictionary">3.7.1.5. Miscellaneous Options Dictionary</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter"><span class="section-number">3.7. </span>Common JSON Settings</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="PBS.html"
                        title="next chapter"><span class="section-number">3.7.2. </span>PBS Script Options</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/common/json/uncategorized.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="PBS.html" title="3.7.2. PBS Script Options"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="3.7. Common JSON Settings"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">CAPE 1.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">3. </span>Usage and Common Settings</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" ><span class="section-number">3.7. </span>Common JSON Settings</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.7.1. </span>Uncategorized JSON Options</a></li> 
      </ul>
    </div>

  <div class="footer">
   CAPE version 1.0a2 documentation, 2021.
  </div>


  </body>
</html>