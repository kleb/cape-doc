<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>4.1.1. Uncategorized JSON Options &mdash; pyCart 0.8 documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="pyCart 0.8 documentation" href="../../index.html" />
    <link rel="up" title="4.1. Baseline JSON Settings for cape" href="index.html" />
    <link rel="next" title="4.1.2. PBS Script Options" href="PBS.html" />
    <link rel="prev" title="4.1. Baseline JSON Settings for cape" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="PBS.html" title="4.1.2. PBS Script Options"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="4.1. Baseline JSON Settings for cape"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">pyCart 0.8 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >4. Cape Module Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">4.1. Baseline JSON Settings for <code class="docutils literal"><span class="pre">cape</span></code></a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">4.1.1. Uncategorized JSON Options</a><ul>
<li><a class="reference internal" href="#maximum-number-of-jobs-to-submit">4.1.1.1. Maximum Number of Jobs to Submit</a></li>
<li><a class="reference internal" href="#file-permissions-mask">4.1.1.2. File Permissions Mask</a></li>
<li><a class="reference internal" href="#startup-shell-commands">4.1.1.3. Startup Shell Commands</a></li>
<li><a class="reference internal" href="#special-python-modules">4.1.1.4. Special Python Modules</a></li>
<li><a class="reference internal" href="#miscellaneous-options-dictionary">4.1.1.5. Miscellaneous Options Dictionary</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">4.1. Baseline JSON Settings for <code class="docutils literal"><span class="pre">cape</span></code></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="PBS.html"
                        title="next chapter">4.1.2. PBS Script Options</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/cape/json/uncategorized.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="uncategorized-json-options">
<span id="cape-json-uncategorized"></span><h1>4.1.1. Uncategorized JSON Options<a class="headerlink" href="#uncategorized-json-options" title="Permalink to this headline">¶</a></h1>
<p>Several inputs in the JSON control files are outside of each category.  A few of
those are common to each module, and they are described here.  The JSON syntax
for these options (shown with some non-default values) is</p>
<blockquote>
<div><div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="s2">&quot;nSubmit&quot;</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="s2">&quot;umask&quot;</span><span class="o">:</span> <span class="mi">0027</span><span class="p">,</span>
<span class="s2">&quot;ShellCmds&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&quot;module load cape&quot;</span><span class="p">,</span>
    <span class="s2">&quot;export PATH=$PATH:~/usr/cart3d&quot;</span>
<span class="p">],</span>
<span class="s2">&quot;PythonPath&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;tools&quot;</span><span class="p">],</span>
<span class="s2">&quot;Modules&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;mymod&quot;</span><span class="p">,</span> <span class="s2">&quot;thatmod&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>Links to additional options for each specific solver are found below.</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="../../pycart/json/uncategorized.html#pycart-json-uncategorized"><span>Cart3D</span></a></li>
<li><a class="reference internal" href="../../pyfun/json/uncategorized.html#pyfun-json-uncategorized"><span>FUN3D</span></a></li>
<li><a class="reference internal" href="../../pyover/json/uncategorized.html#pyover-json-uncategorized"><span>OVERFLOW</span></a></li>
</ul>
</div></blockquote>
<div class="section" id="maximum-number-of-jobs-to-submit">
<h2>4.1.1.1. Maximum Number of Jobs to Submit<a class="headerlink" href="#maximum-number-of-jobs-to-submit" title="Permalink to this headline">¶</a></h2>
<p>This parameter sets the maximum number of jobs that CAPE or any of the
derivative modules will submit with a single command-line call.</p>
<blockquote>
<div><div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="s2">&quot;nSubmit&quot;</span><span class="o">:</span> <span class="mi">10</span>
</pre></div>
</div>
</div></blockquote>
<p>However, this value can be overridden from the command line using the <code class="docutils literal"><span class="pre">-n</span></code>
option.</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ cape -n 20
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="file-permissions-mask">
<h2>4.1.1.2. File Permissions Mask<a class="headerlink" href="#file-permissions-mask" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">umask</span></code> parameter is important to set on systems with shared files.  There
are a variety of reasons that PBS jobs may start using a file permissions mask
different from the user&#8217;s preferred value.  Typically, the most appropriate
<code class="docutils literal"><span class="pre">umask</span></code> is <code class="docutils literal"><span class="pre">0027</span></code>, which causes new files to have permissions <code class="docutils literal"><span class="pre">640</span></code> and
new directories or executable files to have permissions <code class="docutils literal"><span class="pre">750</span></code>.  This enables
users within the same group to read files but not edit them.  Many systems will
use the default mask <code class="docutils literal"><span class="pre">700</span></code>, which means that even users in the same group
cannot see or read the files.</p>
</div>
<div class="section" id="startup-shell-commands">
<h2>4.1.1.3. Startup Shell Commands<a class="headerlink" href="#startup-shell-commands" title="Permalink to this headline">¶</a></h2>
<p>An important miscellaneous option, especially for cases submitted as PBS jobs,
lists commands to run within the shell before running any Cart3D/FUN3D/whatever
commands.  This is a list of strings that will be placed at the top of the run
script in each case directory.  By default, this is an empty list, which means
no startup</p>
<blockquote>
<div><div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="s2">&quot;ShellCmds&quot;</span><span class="o">:</span> <span class="p">[]</span>
</pre></div>
</div>
</div></blockquote>
<p>When Cape sets up a case, it creates a run script <code class="file docutils literal"><span class="pre">run_cape.pbs</span></code> in
each folder (or, if there is a nontrivial run sequence,
<code class="file docutils literal"><span class="pre">run_cape.00.pbs</span></code>, <code class="file docutils literal"><span class="pre">run_cape.01.pbs</span></code>, etc.).  The run script
can use BASH, <code class="docutils literal"><span class="pre">csh</span></code>, or any other shell, and this is set in the &#8220;PBS&#8221; section
of the JSON file.  The default is BASH (that is, <code class="docutils literal"><span class="pre">&quot;/bin/bash&quot;</span></code>), but
many users prefer <code class="docutils literal"><span class="pre">csh</span></code>.</p>
<p>If your rc file for your selected shell contains the necessary commands to run
Cart3D, a possible option is to use the following.</p>
<blockquote>
<div><div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="s2">&quot;ShellCmds&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;source ~/.bashrc&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>(or <code class="docutils literal"><span class="pre">&quot;.</span> <span class="pre">~/.bashrc&quot;</span></code>, as appropriate) This is discouraged unless Cart3D,
OVERFLOW, or FUN3D is basically the only software you ever use. A better option
is to put the commands that are needed in the JSON file, which makes that file
portable and less subject to later errors or system changes. Here is an example
that I use to run Cart3D on NASA&#8217;s Pleiades supercomputer.</p>
<blockquote>
<div><div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="s2">&quot;ShellCmds&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&quot;. $MODULESHOME/init/bash&quot;</span><span class="p">,</span>
    <span class="s2">&quot;module use -a /u/ddalle/share/modulefiles&quot;</span><span class="p">,</span>
    <span class="s2">&quot;module load cart3d&quot;</span><span class="p">,</span>
    <span class="s2">&quot;module load pycart&quot;</span><span class="p">,</span>
    <span class="s2">&quot;module load mpt&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>The first command is necessary because PBS jobs are started with very few
environment variables set.  For running cases in parallel, this command (or
sourcing a premade <code class="file docutils literal"><span class="pre">.*shrc</span></code> file) is necessary.  Another thing to note
here is that you also need to tell the interpreter where the pyCart commands
are&#8212;hence the <code class="docutils literal"><span class="pre">&quot;module</span> <span class="pre">load</span> <span class="pre">pycart&quot;</span></code> line.</p>
</div>
<div class="section" id="special-python-modules">
<h2>4.1.1.4. Special Python Modules<a class="headerlink" href="#special-python-modules" title="Permalink to this headline">¶</a></h2>
<p>Some advanced runs require features that simply do not fit into the main pyCart,
pyOver, or whichever appropriate set of options. This would be true no matter
much work is put into the code. Indeed, one of the purposes of Cape is to
still be helpful when this situation inevitably occurs.</p>
<p>The following two lines allow the user to define a custom Python module (or list
of modules, if the user deems that appropriate).</p>
<blockquote>
<div><div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="s2">&quot;PythonPath&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;tools/&quot;</span><span class="p">],</span>
<span class="s2">&quot;Modules&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;mymod&quot;</span><span class="p">,</span> <span class="s2">&quot;thatmod&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>The first variable causes pyCart to append the folder <code class="docutils literal"><span class="pre">tools/</span></code> to the
environment variable <code class="docutils literal"><span class="pre">$PYTHONPATH</span></code>.  This means that files in <code class="docutils literal"><span class="pre">tools/</span></code> can
be imported as Python modules.</p>
<p>The second variable lists Python modules that will be imported every time the
the JSON file is loaded.  The way this is implemented is by just
running the standard <code class="docutils literal"><span class="pre">import</span> <span class="pre">mymod</span></code> and <code class="docutils literal"><span class="pre">import</span> <span class="pre">thatmod</span></code> syntax, and then
the functions and other information in those modules will be available to
Cape for that run.</p>
</div>
<div class="section" id="miscellaneous-options-dictionary">
<span id="cape-json-misc-dict"></span><h2>4.1.1.5. Miscellaneous Options Dictionary<a class="headerlink" href="#miscellaneous-options-dictionary" title="Permalink to this headline">¶</a></h2>
<p>The full list of available options and their possible values is described below.
Alternate options are separated by <code class="docutils literal"><span class="pre">|</span></code> charcters, and default values are
between <code class="docutils literal"><span class="pre">{}</span></code> characters.</p>
<blockquote>
<div><dl class="docutils">
<dt><em>ShellCmds</em>: {<code class="docutils literal"><span class="pre">&quot;[]&quot;</span></code>} | <code class="xref py py-class docutils literal"><span class="pre">list</span></code> (<code class="xref py py-class docutils literal"><span class="pre">str</span></code>)</dt>
<dd>List of shell commands to run at start of each script</dd>
<dt><em>PythonPath</em>: {<code class="docutils literal"><span class="pre">&quot;&quot;</span></code>} | <code class="xref py py-class docutils literal"><span class="pre">str</span></code> | <code class="xref py py-class docutils literal"><span class="pre">list</span></code> (<code class="xref py py-class docutils literal"><span class="pre">str</span></code>)</dt>
<dd>Path or list of paths to add to <code class="docutils literal"><span class="pre">$PYTHONPATH</span></code> environment variable</dd>
<dt><em>Modules</em>: {<code class="docutils literal"><span class="pre">[]</span></code>} | <code class="xref py py-class docutils literal"><span class="pre">str</span></code> | <code class="xref py py-class docutils literal"><span class="pre">list</span></code> (<code class="xref py py-class docutils literal"><span class="pre">str</span></code>)</dt>
<dd>Python module or list of Python modules to import with this file</dd>
<dt><em>umask</em>: {<code class="docutils literal"><span class="pre">0027</span></code>} | <code class="xref py py-class docutils literal"><span class="pre">int</span></code> | <code class="xref py py-class docutils literal"><span class="pre">str</span></code></dt>
<dd>File permissions mask interpreted as octal number</dd>
<dt><em>nSubmit</em>: {<code class="docutils literal"><span class="pre">10</span></code>} | <code class="xref py py-class docutils literal"><span class="pre">int</span></code></dt>
<dd>Maximum number of jobs to submit/run</dd>
</dl>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="PBS.html" title="4.1.2. PBS Script Options"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="4.1. Baseline JSON Settings for cape"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">pyCart 0.8 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >4. Cape Module Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >4.1. Baseline JSON Settings for <code class="docutils literal"><span class="pre">cape</span></code></a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014-2017, Derek J. Dalle.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.
    </div>
  </body>
</html>